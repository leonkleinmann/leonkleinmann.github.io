(function(){"use strict";var e={8577:function(e,t,i){var n=i(7195),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.isMobile?e._e():[e.isPlaying?e._e():[t("HeaderComponent")],e.setupCompleted?[t("GameComponent")]:e._e(),e.setupCompleted?e._e():[t("SetupComponent")],e.isPlaying?e._e():[t("FooterComponent")],t("LoadingComponent")],e.isMobile?[t("div",{staticClass:"mobile-support"},[e._v(" Sorry, mobile devices are not supported yet! ")])]:e._e()],2)},o=[],a=i(3056),r=i.n(a),l=i(408),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("div",{staticClass:"wrapper"},[t("div",{staticClass:"logo"},[t("IsometricWrapper",[t("img",{attrs:{alt:"logo",src:"https://via.placeholder.com/100"}})])],1),t("div",{staticClass:"links"})])])},d=[],c=function(){var e=this,t=e._self._c;return t("div",{ref:"iso-wrapper",staticClass:"iso-wrapper",class:[e.border?"border":"",e.clickable?"clickable":"",e.error?"error":""],on:{click:function(t){e.clickable&&e.$emit("clicked",!0)}}},[e._t("default",(function(){return[e._v(" Slot content goes here ")]}))],2)},u=[],m={name:"IsometricWrapper",props:{border:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},error:{type:Boolean,default:!1}}},h=m,v=i(3736),g=(0,v.Z)(h,c,u,!1,null,"69f4aa2c",null),w=g.exports,f={name:"HeaderComponent",components:{IsometricWrapper:w}},S=f,x=(0,v.Z)(S,p,d,!1,null,"b94d0c0c",null),C=x.exports,y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"game"})},A=[],b=i(2382),Z=i(3341),_=JSON.parse('{"Y":{"S":{"0":{"type":"grass","x":0,"y":0},"1":{"type":"grass","x":32,"y":32},"2":{"type":"grass","x":0,"y":32}}}}');function k(e,t){let i=b.oO3.from(t,{width:window.innerWidth,height:window.innerHeight});e.stage.addChild(i)}function E(e){let t=new b.VL4.from(e.resources["tiles"].url),i=32,n=32;return t["grass"]=new b.xEZ(t,new b.AeJ(i,0,i,n)),t["stone"]=new b.xEZ(t,new b.AeJ(0,0,i,n)),t}function P(e){let t=new Z.uX(e);return Object.values(_.Y.S).forEach((i=>{t.tile(e[i.type],i.x,i.y)})),t}function L(e){e.baseUrl="/assets/",e.add("tiles","tiles/tiles.png"),e.add("avatar","avatars/avatar.png")}var J=i(5886);function M(e,t,i){let n=new b.VL4.from(e.resources["avatar"].url);return n["standNorth"]=[new b.xEZ(n,new b.AeJ(2*t,3*i,t,i))],n["walkNorth"]=[new b.xEZ(n,new b.AeJ(1*t,3*i,t,i)),new b.xEZ(n,new b.AeJ(2*t,3*i,t,i)),new b.xEZ(n,new b.AeJ(3*t,3*i,t,i)),new b.xEZ(n,new b.AeJ(0,3*i,t,i))],n["standSouth"]=[new b.xEZ(n,new b.AeJ(2*t,0,t,i))],n["walkSouth"]=[new b.xEZ(n,new b.AeJ(1*t,0,t,i)),new b.xEZ(n,new b.AeJ(2*t,0,t,i)),new b.xEZ(n,new b.AeJ(3*t,0,t,i)),new b.xEZ(n,new b.AeJ(0,0,t,i))],n["standWest"]=[new b.xEZ(n,new b.AeJ(2*t,i,t,i))],n["walkWest"]=[new b.xEZ(n,new b.AeJ(1*t,1*i,t,i)),new b.xEZ(n,new b.AeJ(2*t,1*i,t,i)),new b.xEZ(n,new b.AeJ(3*t,1*i,t,i)),new b.xEZ(n,new b.AeJ(0,1*i,t,i))],n["standEast"]=[new b.xEZ(n,new b.AeJ(2*t,2*i,t,i))],n["walkEast"]=[new b.xEZ(n,new b.AeJ(1*t,2*i,t,i)),new b.xEZ(n,new b.AeJ(2*t,2*i,t,i)),new b.xEZ(n,new b.AeJ(3*t,2*i,t,i)),new b.xEZ(n,new b.AeJ(0,2*i,t,i))],n}function O(e){return new b.KgH(e.standSouth)}function I(e,t,i){e.playing||(e.textures=t.walkNorth,e.play(),J.ZP.to(e,{y:e.y-i,duration:1}))}function W(e,t,i){e.playing||(e.textures=t.walkSouth,e.play(),J.ZP.to(e,{y:e.y+i,duration:1}))}function G(e,t,i){e.playing||(e.textures=t.walkWest,e.play(),J.ZP.to(e,{x:e.x-i,duration:1}))}function $(e,t,i){e.playing||(e.textures=t.walkEast,e.play(),J.ZP.to(e,{x:e.x+i,duration:1}))}var j={name:"GameComponent",mounted(){this.$store.commit("setIsLoading",!0),this.pixiApp=new b.MxU({resizeTo:window,backgroundColor:"black",autoDensity:!0,resolution:window.devicePixelRatio||1}),this.pixiLoader=this.pixiApp.loader,document.querySelectorAll(".game")[0].appendChild(this.pixiApp.view),this.preloadAssets(),this.registerKeyEvents(),window.addEventListener("resize",(()=>{console.log("resize")}))},data(){return{pixiApp:void 0,pixiLoader:void 0,mapSheet:void 0,tileMap:void 0,avatar:void 0,avatarSheet:void 0}},computed:{...(0,l.Se)(["mapSettings","gameSettings"])},methods:{preloadAssets(){L(this.pixiLoader),this.pixiLoader.onComplete.add((()=>{this.mapSheet=E(this.pixiLoader),k(this.pixiApp,this.mapSheet.grass),this.tileMap=P(this.mapSheet),this.avatarSheet=M(this.pixiLoader,64,64),this.avatar=O(this.avatarSheet),this.avatar.anchor.set(.5),this.avatar.animationSpeed=1/4,this.avatar.loop=!1,this.avatar.x=this.pixiApp.view.width/2,this.avatar.y=this.pixiApp.view.height/2,this.pixiApp.stage.addChild(this.tileMap),this.pixiApp.stage.addChild(this.avatar),this.$store.commit("setIsLoading",!1),this.$store.commit("setIsPlaying",!0)})),this.pixiLoader.onError.add((e=>{console.log("ERROR LOADING ASSETS",e.message)})),this.pixiLoader.load()},registerKeyEvents(){document.addEventListener("keydown",(e=>{"ArrowUp"!==e.code&&"KeyW"!==e.code||I(this.avatar,this.avatarSheet,this.gameSettings.moveSpeed),"ArrowDown"!==e.code&&"KeyS"!==e.code||W(this.avatar,this.avatarSheet,this.gameSettings.moveSpeed),"ArrowLeft"!==e.code&&"KeyA"!==e.code||G(this.avatar,this.avatarSheet,this.gameSettings.moveSpeed),"ArrowRight"!==e.code&&"KeyD"!==e.code||$(this.avatar,this.avatarSheet,this.gameSettings.moveSpeed)}),!1)}},destroyed(){document.removeEventListener("keydown",(()=>{}))}},H=j,D=(0,v.Z)(H,y,A,!1,null,"3f664858",null),K=D.exports,R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer"},[t("div",{staticClass:"wrapper"},[e.isPlaying?e._e():t("div",{staticClass:"links"},[t("div",{staticClass:"link"},[t("a",{attrs:{alt:"hsrm",href:"https://hs-rm.de"}},[t("IsometricWrapper",[t("img",{attrs:{alt:"hsrm",src:"https://via.placeholder.com/50"}})])],1)]),t("div",{staticClass:"link"},[t("a",{attrs:{alt:"suv",href:"https://s-v.de"}},[t("IsometricWrapper",[t("img",{attrs:{alt:"hsrm",src:"https://via.placeholder.com/50"}})])],1)])])])])},U=[],N={name:"FooterComponent",components:{IsometricWrapper:w},computed:{...(0,l.Se)(["isPlaying"])}},T=N,F=(0,v.Z)(T,R,U,!1,null,"c3420110",null),z=F.exports,B=function(){var e=this,t=e._self._c;return e.isLoading?t("div",{staticClass:"loading"},[t("div",{staticClass:"background"}),t("div",{staticClass:"animation"})]):e._e()},V=[],q={name:"LoadingComponent",computed:{...(0,l.Se)(["isLoading"])}},Y=q,X=(0,v.Z)(Y,B,V,!1,null,"77bd9a7b",null),Q=X.exports,ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setup"},[t("MultimediaComponent",{on:{mediaSetupComplete:e.mediaSetupComplete}}),t("button",{staticClass:"skip",on:{click:e.skipSetup}},[e._v("Skip Setup")])],1)},te=[],ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setup"},[t("div",{staticClass:"title"},[e._v(" Setup ")]),e._m(0),t("div",{staticClass:"complete"},[t("IsometricWrapper",{attrs:{clickable:e.permissionsGranted,border:!0,error:!e.permissionsGranted},on:{clicked:function(t){return e.completeSetup()}}},[e._v(" Weiter ")])],1)])},ne=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"cam"},[t("video",{attrs:{autoplay:"true",id:"cam"}})])}],se={name:"MultimediaComponent",components:{IsometricWrapper:w},data(){return{audioPermissionGranted:!1,videoPermissionGranted:!1,audioStream:void 0,videoStream:void 0}},computed:{permissionsGranted(){return this.audioPermissionGranted&&this.videoPermissionGranted}},mounted(){this.init()},methods:{init(){navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((e=>{let t=new AudioContext,i=t.createMediaStreamSource(e),n=t.destination;i.connect(n),this.audioPermissionGranted=!0})).catch((()=>{console.log("Audio: Something went wrong!")})),navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!1}).then((e=>{let t=document.querySelector("#cam");t.srcObject=e,this.videoPermissionGranted=!0})).catch((()=>{console.log("Video: Something went wrong")}))},completeSetup(){this.permissionsGranted&&this.$emit("mediaSetupComplete",!0)}}},oe=se,ae=(0,v.Z)(oe,ie,ne,!1,null,"47f821f5",null),re=ae.exports,le={name:"SetupComponent",components:{MultimediaComponent:re},data(){return{}},methods:{mediaSetupComplete(){console.log("Multimedia Setup was completed successfully! Starting User Setup.."),this.$store.commit("setSetupCompleted",!0)},skipSetup(){this.$store.commit("setSetupCompleted",!0)}}},pe=le,de=(0,v.Z)(pe,ee,te,!1,null,"4587ba94",null),ce=de.exports,ue={name:"App",components:{SetupComponent:ce,HeaderComponent:C,GameComponent:K,FooterComponent:z,LoadingComponent:Q},computed:{...(0,l.Se)(["isMobile","setupCompleted","isPlaying"])},mounted(){let e=r().getParser(window.navigator.userAgent);"desktop"!==e.parsedResult.platform.type&&this.$store.commit("setIsMobile",!0),this.$store.commit("setSetupCompleted",!1)}},me=ue,he=(0,v.Z)(me,s,o,!1,null,null,null),ve=he.exports;n.ZP.use(l.ZP);var ge=new l.ZP.Store({state:{mapData:{},settings:{map:{tileWidth:32,tileHeight:32},graphics:{width:64,height:64},game:{moveSpeed:32}},isMobile:!1,setupCompleted:!1,isLoading:!1,isPlaying:!1},getters:{isMobile:e=>e.isMobile,setupCompleted:e=>e.setupCompleted,isLoading:e=>e.isLoading,isPlaying:e=>e.isPlaying,settings:e=>e.settings,mapSettings:e=>e.settings.map,graphicSettings:e=>e.settings.graphics,gameSettings:e=>e.settings.game},mutations:{setIsMobile(e,t){e.isMobile=t},setSetupCompleted(e,t){e.setupCompleted=t},setIsLoading(e,t){e.isLoading=t},setIsPlaying(e,t){e.isPlaying=t},setSettings(e,t){e.settings=t}},actions:{}}),we=i(2241),fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[e._v(" Home-Content ")])},Se=[],xe={name:"HomeComponent"},Ce=xe,ye=(0,v.Z)(Ce,fe,Se,!1,null,"5952f7c8",null),Ae=ye.exports;n.ZP.use(we.ZP);var be=new we.ZP({mode:"history",routes:[{path:"/",name:"home",component:Ae}]});n.ZP.config.productionTip=!1,new n.ZP({router:be,store:ge,render:e=>e(ve)}).$mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,o){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],o=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(d--,1);var p=s();void 0!==p&&(t=p)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,a=n[0],r=n[1],l=n[2],p=0;if(a.some((function(t){return 0!==e[t]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(l)var d=l(i)}for(t&&t(n);p<a.length;p++)o=a[p],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=self["webpackChunkimmersive_metaspace"]=self["webpackChunkimmersive_metaspace"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(8577)}));n=i.O(n)})();
//# sourceMappingURL=app.d73ac1b6.js.map